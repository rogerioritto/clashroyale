<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clash Analytics Dashboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x2694;</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <div class="dashboard-header">
            <h1>Clash Analytics Dashboard</h1>
            <button class="theme-toggle" id="themeToggle" onclick="toggleTema()" title="Alternar tema"></button>
        </div>

        <!-- 1.1 Resumo do Dia -->
        <div class="header-stats">
            <div class="stat-card">
                <div class="label">Trofeus Atuais</div>
                <div class="value" id="trofeusAtuais">--</div>
            </div>
            <div class="stat-card">
                <div class="label">Hoje (24h)</div>
                <div class="value" id="wlHoje">--</div>
                <div class="sub" id="wlHojeDetalhe"></div>
            </div>
            <div class="stat-card">
                <div class="label">Delta de Trofeus (Hoje)</div>
                <div class="value" id="deltaHoje">--</div>
            </div>
        </div>

        <!-- 1.2 Grafico de Evolucao -->
        <div class="panel">
            <div class="panel-title">Evolucao de Trofeus</div>
            <div class="filtro-container">
                <label>Periodo:</label>
                <input type="text" id="rangePicker" placeholder="Selecione um intervalo...">
                <button class="btn-limpar" onclick="limparFiltro()">Limpar</button>
                <button class="btn-filtro" data-filtro="hoje" onclick="aplicarFiltroRapido('hoje')">Hoje</button>
                <button class="btn-filtro" data-filtro="7dias" onclick="aplicarFiltroRapido('7dias')">7 dias</button>
                <button class="btn-filtro" data-filtro="30dias" onclick="aplicarFiltroRapido('30dias')">30 dias</button>
                <button class="btn-filtro" data-filtro="mes" onclick="aplicarFiltroRapido('mes')">Este mes</button>
            </div>
            <canvas id="meuGrafico"></canvas>
        </div>

        <!-- 1.3 Painel de KPIs Dinamicos -->
        <div class="panel">
            <div class="panel-title">Indicadores do Periodo</div>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-label">Partidas</div>
                    <div class="kpi-value" id="kpiTotal">--</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Vitorias</div>
                    <div class="kpi-value" id="kpiVitorias" style="color:var(--win)">--</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Derrotas</div>
                    <div class="kpi-value" id="kpiDerrotas" style="color:var(--lose)">--</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Empates</div>
                    <div class="kpi-value" id="kpiEmpates" style="color:var(--draw)">--</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Win Rate</div>
                    <div class="kpi-value" id="kpiWinRate">--</div>
                </div>
            </div>
        </div>

        <!-- 2. Inteligencia Estrategica -->
        <!-- 2.1 Analisador de Deck -->
        <div class="panel">
            <div class="panel-title">Analise de Decks</div>
            <div id="deckAnalise"></div>
        </div>

        <!-- Seção de Análise Estratégica Premium -->
        <div class="intel-section">
            <div class="intel-section-header">
                <h2 class="intel-section-title">Inteligencia Estrategica</h2>
            </div>

            <div class="intel-grid-premium">
                <!-- Counters (Hard + Soft em abas) -->
                <div class="panel panel-premium">
                    <div class="panel-tabs">
                        <button class="panel-tab active" onclick="alternarCounterTab('hard')">Hard Counters</button>
                        <button class="panel-tab" onclick="alternarCounterTab('soft')">Soft Counters</button>
                    </div>
                    <div class="counter-list" id="hardCounters"></div>
                    <div class="counter-list" id="softCounters" style="display:none"></div>
                </div>

                <!-- Matchup por Arquetipo -->
                <div class="panel panel-premium">
                    <div class="panel-title">Matchup por Arquetipo</div>
                    <div id="matchupAnalise"></div>
                </div>
            </div>

            <!-- Win Rate por Carta Adversaria -->
            <div class="panel panel-premium">
                <div class="panel-title">Win Rate por Carta Adversaria</div>
                <div class="wr-card-list" id="wrPorCarta"></div>
            </div>
        </div>

        <!-- 3.2 Historico de Partidas -->
        <div class="panel">
            <div class="panel-title">Historico de Partidas</div>
            <div id="historicoTabela"></div>
            <div class="paginacao" id="historicoPaginacao"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
